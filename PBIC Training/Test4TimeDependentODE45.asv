global s i;
i=1;
s(i) = 0;

ft = linspace(0,5,25);
f = ft.^2 - ft - 3;

gt = linspace(1,6,25);
g = 3*sin(gt-0.25);

tspan = [1 5];
ic = 1;
opts = odeset('RelTol',1e-2,'AbsTol',1e-4);
[t,y] = ode45(@(t,y) myode(t,y,ft,f,gt,g), tspan, ic, opts);

plot(t,y)


%%
% 
% clear;
% 
% ft2 = linspace(0,10,5);
% f2 = ft2 * 0;
% f2(end) = 1;
% ft22 = linspace(0,10,3);
% f22 = interp1(ft2,f2,ft22);
% 
% figure(1);
% plot(ft2,f2);
% figure(2);
% plot(ft22,f22);
% figure(3);
% plot(ft2,f2);
% hold on;
% plot(ft22,f22);
% legend('原','插');

%%
function dydt = myode(t,y,ft,f,gt,g)
f = interp1(ft,f,t); % Interpolate the data set (ft,f) at time t
global s i
s(i) = f;
i = i+1;
g = interp1(gt,g,t); % Interpolate the data set (gt,g) at time t
dydt = -f.*y + g; % Evaluate ODE at time t
end

